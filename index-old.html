<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HifzMate - Quran with Tajweed & Planner</title>
  <link rel="stylesheet" href="style.css?v=4.5" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <meta name="description" content="HifzMate - A comprehensive Quran study app with Tajweed, memorization planner, quizzes, and progress tracking">
  <meta name="theme-color" content="#2c5530">
</head>
<body>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  
  <header>
    <div class="header-content">
      <h1><img src="logo.png" alt="HifzMate Logo" class="logo"></h1>
      <div class="header-actions">
        <div id="userInfo" class="user-info hidden">
          <span id="userDisplayName" class="user-name"></span>
          <button id="logoutBtn" class="logout-btn" title="Logout">ğŸšª</button>
        </div>
        <button id="authBtn" class="auth-btn" title="Login/Signup">ğŸ‘¤</button>
        <button id="themeToggle" class="theme-toggle" title="Toggle Dark Mode">
          <span class="theme-icon">ğŸŒ™</span>
        </button>
      </div>
    </div>
    <nav>
      <button class="tab-btn active" data-section="reader">ğŸ“– Quran Reader</button>
      <button class="tab-btn" data-section="planner">ğŸ—“ï¸ Planner</button>
      <button class="tab-btn" data-section="quiz">ğŸ§  Quiz</button>
      <button class="tab-btn" data-section="bookmarks">ğŸ”– Bookmarks</button>
      <button class="tab-btn" data-section="badges">ğŸ† Badges</button>
      <button class="tab-btn" data-section="profile">ğŸ‘¤ Profile</button>
    </nav>
  </header>

  <!-- Quran Reader -->
  <section id="section-reader" class="tab-section active">
    <div class="surah-header">
      <h2 id="surahTitleArabic" class="arabic-title">Ø³ÙÙˆØ±ÙØ©Ù Ø§Ù„Ù’ÙÙØ§ØªÙØ­ÙØ©Ù</h2>
      <h3 id="surahTitleEnglish" class="english-title">Al-Faatiha</h3>
    </div>
    
    <div id="controls">
      <div class="control-group">
        <label for="qariSelector">ğŸµ Qari:</label>
        <select id="qariSelector"></select>
      </div>
      <div class="control-group">
        <label for="surahSelector">ğŸ“– Surah:</label>
        <select id="surahSelector"></select>
      </div>
      <div class="control-group">
        <label for="ayahSelector">ğŸ”¢ Ayah:</label>
        <select id="ayahSelector"></select>
      </div>
      <div class="control-group">
        <button id="prevSurah">â¬…ï¸ Previous</button>
        <button id="nextSurah">Next â¡ï¸</button>
        <button id="showTajweedBtn">ğŸ¨ Toggle Tajweed</button>
      </div>
    </div>
    
    <div id="ayahs-container"></div>
  </section>

  <!-- Planner -->
  <section id="section-planner" class="tab-section">
    <h2>ğŸ—“ï¸ Memorization Planner</h2>
    <div class="planner-form">
      <div class="form-group">
        <label for="planName">ğŸ“ Plan Name:</label>
        <input type="text" id="planName" placeholder="My Ramadan Goal" />
      </div>
      <div class="form-group">
        <label for="surahDropdown">ğŸ“– Surah:</label>
        <select id="surahDropdown"></select>
      </div>
      <div class="form-group">
        <label for="paceInput">âš¡ Pace (Ayahs/day):</label>
        <input type="number" id="paceInput" min="1" max="10" value="3" />
      </div>
      <button id="addPlanBtn" class="primary-btn">â• Add Plan</button>
    </div>
    
    <div id="plansContainer" class="plans-list"></div>
  </section>

  <!-- Quiz -->
  <section id="section-quiz" class="tab-section">
    <h2>ğŸ§  Quran Quiz</h2>
    <div id="quizContainer" class="quiz-container">
      <div class="quiz-question">
        <p id="quizQuestion" class="question-text"></p>
        <input type="text" id="quizAnswer" placeholder="Your answer..." class="quiz-input" />
        <div class="quiz-actions">
          <button id="submitAnswer" class="primary-btn">âœ… Submit</button>
          <button id="nextQuestion" class="secondary-btn hidden">â¡ï¸ Next Question</button>
        </div>
        <div class="quiz-feedback">
          <p id="quizFeedback" class="feedback-text"></p>
          <p id="quizScore" class="score-text"></p>
        </div>
      </div>
    </div>
    
    <div class="mistakes-section">
      <h3>âŒ My Mistakes</h3>
      <ul id="mistakeList" class="mistakes-list"></ul>
      <button id="clearMistakes" class="danger-btn">ğŸ—‘ï¸ Clear Mistakes</button>
    </div>
  </section>

  <!-- Bookmarks -->
  <section id="section-bookmarks" class="tab-section">
    <h2>ğŸ”– My Bookmarks</h2>
    <div class="bookmarks-container">
      <ul id="bookmarkList" class="bookmarks-list"></ul>
      <button id="clearBookmarks" class="danger-btn">ğŸ—‘ï¸ Clear All Bookmarks</button>
    </div>
  </section>

  <!-- Badges -->
  <section id="section-badges" class="tab-section">
    <h2>ğŸ† My Achievements</h2>
    <div id="badgeContainer" class="badges-grid"></div>
  </section>

  <!-- User Profile -->
  <section id="section-profile" class="tab-section">
    <h2>ğŸ‘¤ My Profile</h2>
    <div class="profile-container">
      <div class="profile-header">
        <div class="profile-avatar">
          <span id="profileAvatar" class="avatar-text">ğŸ‘¤</span>
        </div>
        <div class="profile-info">
          <h3 id="profileName">Loading...</h3>
          <p id="profileEmail" class="profile-email">Loading...</p>
          <p id="memberSince" class="member-since">Member since: Loading...</p>
        </div>
      </div>
      
      <div class="profile-stats">
        <div class="stat-card">
          <div class="stat-icon">ğŸ“–</div>
          <div class="stat-info">
            <div class="stat-value" id="statBadges">0</div>
            <div class="stat-label">Badges Earned</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ”–</div>
          <div class="stat-info">
            <div class="stat-value" id="statBookmarks">0</div>
            <div class="stat-label">Bookmarks</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ—“ï¸</div>
          <div class="stat-info">
            <div class="stat-value" id="statPlans">0</div>
            <div class="stat-label">Active Plans</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ§ </div>
          <div class="stat-info">
            <div class="stat-value" id="statQuizScore">0</div>
            <div class="stat-label">Quiz Score</div>
          </div>
        </div>
      </div>

      <div class="profile-settings">
        <h3>Settings</h3>
        <div class="setting-item">
          <label for="profileDisplayName">Display Name:</label>
          <input type="text" id="profileDisplayName" placeholder="Your name" />
          <button id="updateProfileBtn" class="primary-btn">Update Profile</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Authentication Modal -->
  <div id="authModal" class="auth-modal hidden">
    <div class="auth-modal-content">
      <span class="auth-close" id="closeAuthModal">&times;</span>
      <div class="auth-tabs">
        <button class="auth-tab-btn active" data-auth-tab="login">Login</button>
        <button class="auth-tab-btn" data-auth-tab="signup">Sign Up</button>
      </div>
      
      <!-- Login Form -->
      <div id="loginForm" class="auth-form active">
        <h2>Welcome Back!</h2>
        <div class="form-group">
          <label for="loginEmail">Email:</label>
          <input type="email" id="loginEmail" placeholder="your@email.com" required />
        </div>
        <div class="form-group">
          <label for="loginPassword">Password:</label>
          <input type="password" id="loginPassword" placeholder="Enter password" required />
        </div>
        <button id="loginBtn" class="primary-btn">Login</button>
        <button id="forgotPasswordBtn" class="link-btn">Forgot Password?</button>
        <div id="authError" class="error-message"></div>
        <div id="authSuccess" class="success-message"></div>
      </div>
      
      <!-- Signup Form -->
      <div id="signupForm" class="auth-form">
        <h2>Create Account</h2>
        <div class="form-group">
          <label for="signupName">Display Name:</label>
          <input type="text" id="signupName" placeholder="Your name" required />
        </div>
        <div class="form-group">
          <label for="signupEmail">Email:</label>
          <input type="email" id="signupEmail" placeholder="your@email.com" required />
        </div>
        <div class="form-group">
          <label for="signupPassword">Password:</label>
          <input type="password" id="signupPassword" placeholder="Min. 6 characters" required minlength="6" />
        </div>
        <div class="form-group">
          <label for="signupPasswordConfirm">Confirm Password:</label>
          <input type="password" id="signupPasswordConfirm" placeholder="Confirm password" required minlength="6" />
        </div>
        <button id="signupBtn" class="primary-btn">Sign Up</button>
        <div id="signupError" class="error-message"></div>
        <div id="signupSuccess" class="success-message"></div>
      </div>
    </div>
  </div>

  <!-- Floating Reminder -->
  <div id="reviewReminder" class="reminder-popup hidden">
    <div class="reminder-header">
      <span id="closeReminder" class="close-btn">âœ–</span>
    </div>
    <div class="reminder-content">
      <p id="reminderText">Time to revise your memorization!</p>
      <button id="reviseNow" class="primary-btn">ğŸ“š Revise Now</button>
    </div>
  </div>

  <!-- Firebase Configuration and Service -->
  <script src="firebase-config.js"></script>
  <script src="firebase-service.js"></script>
  <script src="script.js?v=4.5"></script>
</body>
</html>
